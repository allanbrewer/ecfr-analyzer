{% extends "base.html" %}

{% block content %}
<div class="row">
    <!-- Insights Selector -->
    <div class="col-12 mb-4">
        <div class="card shadow-sm">
            <div class="card-header bg-primary text-white">
                <h5 class="card-title mb-0">Insights Selection</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4">
                        <div class="card mb-3 mb-md-0">
                            <div class="card-body text-center">
                                <i class="bi bi-tools fs-1 text-primary"></i>
                                <h5 class="card-title mt-3">Waste Footprint</h5>
                                <p class="card-text">Keywords related to waste, redundancy, and inefficiency analysis.
                                </p>
                                <a href="#waste-section" class="btn btn-outline-primary">View Waste Analysis</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card mb-3 mb-md-0">
                            <div class="card-body text-center">
                                <i class="bi bi-people fs-1 text-success"></i>
                                <h5 class="card-title mt-3">DEI Footprint</h5>
                                <p class="card-text">Keywords related to diversity, equity, and inclusion metrics.</p>
                                <a href="#dei-section" class="btn btn-outline-success">View DEI Analysis</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-body text-center">
                                <i class="bi bi-diagram-3 fs-1 text-warning"></i>
                                <h5 class="card-title mt-3">Bureaucratic Complexity</h5>
                                <p class="card-text">Analysis of vague language and complex regulatory requirements.</p>
                                <a href="#bureaucratic-section" class="btn btn-outline-warning">View Complexity
                                    Analysis</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Waste Footprint Section -->
    <div class="col-12 mb-5" id="waste-section">
        <div class="card shadow-sm">
            <div class="card-header bg-primary text-white">
                <h5 class="card-title mb-0">Waste Footprint Analysis</h5>
            </div>
            <div class="card-body">
                <div class="row mb-4">
                    <div class="col-md-6">
                        <div id="waste-agency-comparison-chart" style="height: 400px;"></div>
                    </div>
                    <div class="col-md-6">
                        <div id="top-waste-keywords-chart" style="height: 400px;"></div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header bg-light">
                                <h6 class="card-title mb-0">Key Waste Footprint Insights</h6>
                            </div>
                            <div class="card-body">
                                <ul class="list-group list-group-flush" id="waste-insights-list">
                                    <!-- Will be populated by JavaScript -->
                                </ul>
                                <div class="mt-3">
                                    <h6>Actionable Efficiency Opportunities:</h6>
                                    <p>Based on waste keyword analysis, agencies with high waste footprints may have
                                        opportunities to streamline regulations through:</p>
                                    <ol>
                                        <li>Consolidating overlapping requirements</li>
                                        <li>Reducing redundant reporting obligations</li>
                                        <li>Simplifying complex compliance mechanisms</li>
                                        <li>Modernizing outdated paper-based processes</li>
                                        <li>Eliminating duplicative regulatory structures</li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- DEI Footprint Section -->
    <div class="col-12 mb-5" id="dei-section">
        <div class="card shadow-sm">
            <div class="card-header bg-success text-white">
                <h5 class="card-title mb-0">DEI Footprint Analysis</h5>
            </div>
            <div class="card-body">
                <div class="row mb-4">
                    <div class="col-md-6">
                        <div id="dei-agency-comparison-chart" style="height: 400px;"></div>
                    </div>
                    <div class="col-md-6">
                        <div id="top-dei-keywords-chart" style="height: 400px;"></div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header bg-light">
                                <h6 class="card-title mb-0">DEI Keyword Trends</h6>
                            </div>
                            <div class="card-body">
                                <div id="dei-trends-chart" style="height: 300px;"></div>
                                <div class="mt-3">
                                    <h6>Historical Context:</h6>
                                    <p id="dei-historical-context">
                                        The prevalence of DEI-related terminology in federal regulations has evolved
                                        over time,
                                        reflecting changing policy priorities and societal concerns. This chart tracks
                                        the frequency
                                        of DEI-related terms across regulatory changes over the analyzed period.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bureaucratic Complexity Section -->
    <div class="col-12 mb-5" id="bureaucratic-section">
        <div class="card shadow-sm">
            <div class="card-header bg-warning text-dark">
                <h5 class="card-title mb-0">Bureaucratic Complexity Analysis</h5>
            </div>
            <div class="card-body">
                <div class="row mb-4">
                    <div class="col-md-6">
                        <div id="vague-language-chart" style="height: 400px;"></div>
                    </div>
                    <div class="col-md-6">
                        <div id="complex-sentences-chart" style="height: 400px;"></div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header bg-light">
                                <h6 class="card-title mb-0">Top Vague Phrases by Agency</h6>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-striped table-hover">
                                        <thead>
                                            <tr>
                                                <th>Agency</th>
                                                <th>Vague Phrases per Sentence</th>
                                                <th>Top Vague Phrase</th>
                                                <th>Occurrence Count</th>
                                                <th>Complex Sentences %</th>
                                            </tr>
                                        </thead>
                                        <tbody id="vague-phrases-table">
                                            <!-- Will be populated by JavaScript -->
                                            <tr>
                                                <td colspan="5" class="text-center">Loading vague phrase data...</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="mt-3">
                                    <h6>Clarity Improvement Opportunities:</h6>
                                    <p>
                                        Agencies with high rates of vague language and complex sentences could benefit
                                        from plain language initiatives that:
                                    </p>
                                    <ul>
                                        <li>Replace ambiguous terms with specific, measurable requirements</li>
                                        <li>Break down complex sentences into clearer, shorter statements</li>
                                        <li>Eliminate unnecessary jargon and legalese</li>
                                        <li>Provide clear examples of compliance</li>
                                        <li>Define subjective terms with objective criteria</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Combined Analysis Section -->
    <div class="col-12">
        <div class="card shadow-sm">
            <div class="card-header bg-primary text-white">
                <h5 class="card-title mb-0">Combined Analysis & Efficiency Index</h5>
            </div>
            <div class="card-body">
                <div class="row mb-4">
                    <div class="col-12">
                        <div id="efficiency-index-chart" style="height: 500px;"></div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <div class="card bg-light">
                            <div class="card-body">
                                <h5 class="card-title">DOGE Efficiency Index Methodology</h5>
                                <p>
                                    The Department of Government Efficiency (DOGE) Efficiency Index combines multiple
                                    regulatory metrics to identify agencies
                                    with the greatest potential for regulatory streamlining. The index weights the
                                    following factors:
                                </p>
                                <ul>
                                    <li><strong>Word Count</strong>: Overall regulatory volume (30%)</li>
                                    <li><strong>Waste Footprint</strong>: Prevalence of waste-related terminology (25%)
                                    </li>
                                    <li><strong>Bureaucratic Complexity</strong>: Vague language and complex sentence
                                        usage (25%)</li>
                                    <li><strong>Historical Change Rate</strong>: Frequency of regulatory modifications
                                        (10%)</li>
                                    <li><strong>Correction Rate</strong>: Frequency of published corrections (10%)</li>
                                </ul>
                                <p>
                                    Higher index scores indicate greater potential for regulatory efficiency
                                    improvements. This analysis aims to highlight
                                    opportunities for streamlining regulations while maintaining their effectiveness.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="static/js/charts.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Initialize insights charts
        initInsightsCharts();

        // Load insights data
        loadInsightsData();
    });
</script>
{% endblock %}